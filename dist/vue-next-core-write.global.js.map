{"version":3,"file":"vue-next-core-write.global.js","sources":["../src/runtime-dom/src/nodeOps.ts","../src/reactivity/src/effect.ts","../src/runtime-core/src/renderer.ts"],"sourcesContent":["/*\n * @Description:\n * @Version: 2.0\n * @Autor: wangyaju\n * @Date: 2020-10-16 16:08:51\n * @LastEditors: wangyaju\n * @LastEditTime: 2020-10-20 14:58:19\n */\nexport const nodeOps = {\n  insert: (child, parent, anchor) => {\n    if (anchor) {\n      parent.insertBefore(child, anchor);\n      return;\n    }\n    parent.appendChild(child);\n  },\n  remove: child => {\n    const parent = child.parentNode;\n    if (parent) {\n      parent.removeChild(child);\n    }\n  },\n  setElementText: (el, text) => {\n    el.textContent = text;\n  },\n  createElement: (type): Element => {\n    const ele = document.createElement(type);\n    return ele;\n  },\n  appendElementTxt: text => {\n    const textNode = document.createTextNode(text);\n    return textNode;\n  }\n};\n","/*\n * @Description:\n * @Version: 2.0\n * @Autor: wangyaju\n * @Date: 2020-10-16 15:25:15\n * @LastEditors: wangyaju\n * @LastEditTime: 2020-10-20 15:49:58\n */\nlet activeEffect;\nexport function effect(fn) {\n  activeEffect = fn;\n  fn();\n}\nexport function reactive(target) {\n  return new Proxy(target, {\n    get(target, key, receiver) {\n      const res = Reflect.get(target, key, receiver);\n      track(target, key);\n      return res;\n    },\n    set(target, key, value, receiver) {\n      const res = Reflect.set(target, key, value, receiver);\n      trigger(target, key, value);\n      return res;\n    }\n  });\n}\n\ntype Dep = Set<any>;\ntype KeyToDepMap = Map<any, Dep>;\nconst targetMap = new WeakMap<any, KeyToDepMap>();\nexport function track(target, key) {\n  let depsMap = targetMap.get(target);\n  if (!depsMap) {\n    targetMap.set(target, (depsMap = new Map()));\n  }\n  let deps = depsMap.get(key);\n  if (!deps) {\n    depsMap.set(key, (deps = new Set()));\n  }\n  if (activeEffect && !deps.has(activeEffect)) {\n    deps.add(activeEffect);\n  }\n}\n\nexport function trigger(target, key, val) {\n  const depsMap = targetMap.get(target);\n  if (!depsMap) return;\n  const effects = depsMap.get(key);\n  effects && effects.forEach(effect => effect());\n}\n","/*\n * @Description:\n * @Version: 2.0\n * @Autor: wangyaju\n * @Date: 2020-10-16 17:18:41\n * @LastEditors: wangyaju\n * @LastEditTime: 2020-10-20 17:37:10\n */\nimport { nodeOps } from \"../../runtime-dom/src/nodeOps\";\nimport { effect } from \"../../reactivity/src/index\";\nlet rootContainer;\n\nexport function render(vnode, container) {\n  patch(container._vnode || null, vnode, container);\n  container._vnode = vnode; // 下载渲染时，container._vnode就成为旧节点\n}\n\nconst patch = (n1, n2, container) => {\n  if (typeof n2.type === \"string\") {\n    processElement(n1, n2, container);\n  } else if (typeof n2.type === \"object\") {\n    mountComponent(n2, container);\n  }\n};\n\nconst mountComponent = (vnode, container) => {\n  const instance = {\n    vnode,\n    type: vnode.type,\n    render: null,\n    subTree: null\n  };\n  //TODO\n  const Component = instance.type;\n  instance.render = Component.setup();\n\n  effect(() => {\n    instance.subTree = instance.render && instance.render();\n    if (container === rootContainer) {\n      container.childNodes[0] && nodeOps.remove(container.childNodes[0]);\n    }\n    patch(null, instance.subTree, container);\n  });\n};\n\nconst processElement = (n1, n2, container) => {\n  if (n1 === null) {\n    mountElement(n2, container);\n  } else {\n    patchElement(n1, n2, container);\n  }\n};\nconst mountElement = (vnode, container) => {\n  const { type, props, children } = vnode;\n  let el = (vnode.el = nodeOps.createElement(type));\n  if (props) {\n    for (const key in props) {\n      hostPatchProps(el, key, null, props[key]);\n    }\n  }\n  if (typeof children === \"string\") {\n    nodeOps.setElementText(el, children);\n  } else if (Array.isArray(children)) {\n    mountChildren(children, el);\n  }\n  nodeOps.insert(el, container, null);\n};\n\nconst patchElement = (n1, n2, container) => {\n  const el = (n2.el = n1.el);\n  const oldProps = n1.props;\n  const newProps = n2.props;\n\n  patchProps(el, n2, oldProps, newProps);\n  patchChildren(n1, n2, el);\n};\n\nconst patchProps = (el, n2, oldProps, newProps) => {\n  if (oldProps !== newProps) {\n    // 新的属性有，就渲染\n\n    for (const key in newProps) {\n      const next = newProps[key];\n      const prev = oldProps[key];\n      if (next !== prev) {\n        hostPatchProps(el, key, prev, next);\n      }\n    }\n    // 旧的属性有，新属性没有，就删除\n\n    for (const key in oldProps) {\n      if (!(key in newProps)) {\n        hostPatchProps(el, key, oldProps[key], null);\n      }\n    }\n  }\n};\nconst patchChildren = (n1, n2, container) => {\n  const c1 = n1 && n1.children;\n  const c2 = (n2 = n2.children);\n  if (typeof c2 === \"string\") {\n    // array => string\n    if (Array.isArray(c1)) {\n      unmountChildren(c1);\n    }\n    // string => string\n    if (c1 !== c2) {\n      nodeOps.setElementText(container, c2);\n      mountChildren(c2, container);\n    }\n  } else {\n    if (typeof c1 === \"string\") {\n      nodeOps.setElementText(container, \"\");\n      mountChildren(c2, container);\n    }\n\n    // array => array\n    // TODO\n    patchKeyedChildren(c1, c2, container);\n  }\n};\n\nconst move = (vnode, container, anchor) => {\n  nodeOps.insert(vnode.el, container, anchor);\n};\nconst mountChildren = (children, container) => {\n  for (let i = 0; i < children.length; i++) {\n    const child = children[i];\n    patch(null, child, container);\n  }\n};\n\nconst unmountChildren = children => {\n  for (let i = 0; i < children.length; i++) {\n    unmount(children[i]);\n  }\n};\n\nconst unmount = child => {\n  nodeOps.remove(child.el);\n};\n\nconst onRe = /^on[^a-z]/;\nconst isOn = key => onRe.test(key);\nconst hostPatchProps = (el, key, prev, next) => {\n  // 处理事件属性 onClick\n  if (isOn(key)) {\n    const name = key.slice(2).toLowerCase();\n    prev && el.removeEventListener(name, prev);\n    next && el.addEventListener(name, next);\n  } else {\n    // 其他属性\n    if (next === null) {\n      el.removeAttribute(key);\n    } else {\n      el.setAttribute(key, next);\n    }\n  }\n};\n\nconst patchKeyedChildren = (c1, c2, container) => {\n  let i;\n  let e1 = c1.length - 1;\n  let e2 = c2.length - 1;\n  const keyToNewIndexMap = new Map();\n  for (i = 0; i <= e2; i++) {\n    const nextChild = c2[i];\n    keyToNewIndexMap.set(nextChild.props.key, i);\n  }\n\n  const newIndexToOldIndexMap = new Array(e2 + 1);\n  for (i = 0; i <= e2; i++) newIndexToOldIndexMap[i] = -1;\n  for (i = 0; i <= e1; i++) {\n    const prevChild = c1[i];\n    let newIndex = keyToNewIndexMap.get(prevChild.props.key);\n    if (newIndex === undefined) {\n      // 删除\n      unmount(prevChild);\n    } else {\n      newIndexToOldIndexMap[newIndex] = i;\n      // 更新，但不移动位置\n      patch(prevChild, c2[newIndex], container);\n    }\n  }\n\n  const sequence = getSequence(newIndexToOldIndexMap);\n  let j = sequence.length - 1;\n  for (i = e2; i >= 0; i--) {\n    const newChild = c2[i];\n\n    const anchor = i + 1 <= e2 ? c2[i + 1].el : null;\n    if (newIndexToOldIndexMap[i] === -1) {\n      // 新增\n      patch(null, newChild, container);\n    } else {\n      if (i == sequence[j]) {\n        j--;\n      } else {\n        move(newChild, container, anchor);\n      }\n    }\n  }\n};\n\n// https://leetcode-cn.com/problems/longest-increasing-subsequence/\n\nconst getSequence = arr => {\n  const p = arr.slice();\n  // 子序列的索引 [0,1,3,5]\n  const result = [0];\n\n  let i, j, u, v, c;\n  const len = arr.length;\n  for (i = 0; i < len; i++) {\n    const arrI = arr[i];\n    // 在末尾插入数据\n    j = result[result.length - 1];\n    if (arr[j] < arrI) {\n      p[i] = j;\n      result.push(i);\n      continue;\n    }\n    // 更新数组\n    u = 0;\n    v = result.length - 1;\n    while (u < v) {\n      c = ((u + v) / 2) | 0;\n      if (arr[result[c]] < arrI) {\n        u = c + 1;\n      } else {\n        v = c;\n      }\n    }\n    if (u > 0) {\n      p[i] = result[u - 1];\n    }\n    result[u] = i;\n  }\n\n  u = result.length - 1;\n  v = result[u];\n  while (u >= 0) {\n    result[u] = v;\n    v = p[v];\n    u--;\n  }\n\n  return result;\n};\n"],"names":[],"mappings":";;;EAAA;;;;;;;;EAQO,IAAM,OAAO,GAAG;MACrB,MAAM,EAAE,UAAC,KAAK,EAAE,MAAM,EAAE,MAAM;UAC5B,IAAI,MAAM,EAAE;cACV,MAAM,CAAC,YAAY,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;cACnC,OAAO;WACR;UACD,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;OAC3B;MACD,MAAM,EAAE,UAAA,KAAK;UACX,IAAM,MAAM,GAAG,KAAK,CAAC,UAAU,CAAC;UAChC,IAAI,MAAM,EAAE;cACV,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;WAC3B;OACF;MACD,cAAc,EAAE,UAAC,EAAE,EAAE,IAAI;UACvB,EAAE,CAAC,WAAW,GAAG,IAAI,CAAC;OACvB;MACD,aAAa,EAAE,UAAC,IAAI;UAClB,IAAM,GAAG,GAAG,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;UACzC,OAAO,GAAG,CAAC;OACZ;MACD,gBAAgB,EAAE,UAAA,IAAI;UACpB,IAAM,QAAQ,GAAG,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;UAC/C,OAAO,QAAQ,CAAC;OACjB;GACF;;ECjCD;;;;;;;;EAQA,IAAI,YAAY,CAAC;WACD,MAAM,CAAC,EAAE;MACvB,YAAY,GAAG,EAAE,CAAC;MAClB,EAAE,EAAE,CAAC;EACP,CAAC;WACe,QAAQ,CAAC,MAAM;MAC7B,OAAO,IAAI,KAAK,CAAC,MAAM,EAAE;UACvB,GAAG,YAAC,MAAM,EAAE,GAAG,EAAE,QAAQ;cACvB,IAAM,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,EAAE,QAAQ,CAAC,CAAC;cAC/C,KAAK,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;cACnB,OAAO,GAAG,CAAC;WACZ;UACD,GAAG,YAAC,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,QAAQ;cAC9B,IAAM,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,QAAQ,CAAC,CAAC;cACtD,OAAO,CAAC,MAAM,EAAE,GAAU,CAAC,CAAC;cAC5B,OAAO,GAAG,CAAC;WACZ;OACF,CAAC,CAAC;EACL,CAAC;EAID,IAAM,SAAS,GAAG,IAAI,OAAO,EAAoB,CAAC;WAClC,KAAK,CAAC,MAAM,EAAE,GAAG;MAC/B,IAAI,OAAO,GAAG,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;MACpC,IAAI,CAAC,OAAO,EAAE;UACZ,SAAS,CAAC,GAAG,CAAC,MAAM,GAAG,OAAO,GAAG,IAAI,GAAG,EAAE,EAAE,CAAC;OAC9C;MACD,IAAI,IAAI,GAAG,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;MAC5B,IAAI,CAAC,IAAI,EAAE;UACT,OAAO,CAAC,GAAG,CAAC,GAAG,GAAG,IAAI,GAAG,IAAI,GAAG,EAAE,EAAE,CAAC;OACtC;MACD,IAAI,YAAY,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,EAAE;UAC3C,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;OACxB;EACH,CAAC;WAEe,OAAO,CAAC,MAAM,EAAE,GAAG,EAAE,GAAG;MACtC,IAAM,OAAO,GAAG,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;MACtC,IAAI,CAAC,OAAO;UAAE,OAAO;MACrB,IAAM,OAAO,GAAG,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;MACjC,OAAO,IAAI,OAAO,CAAC,OAAO,CAAC,UAAA,MAAM,IAAI,OAAA,MAAM,EAAE,GAAA,CAAC,CAAC;EACjD;;EClDA;;;;;;;;EAUA,IAAI,aAAa,CAAC;WAEF,MAAM,CAAC,KAAK,EAAE,SAAS;MACrC,KAAK,CAAC,SAAS,CAAC,MAAM,IAAI,IAAI,EAAE,KAAK,EAAE,SAAS,CAAC,CAAC;MAClD,SAAS,CAAC,MAAM,GAAG,KAAK,CAAC;EAC3B,CAAC;EAED,IAAM,KAAK,GAAG,UAAC,EAAE,EAAE,EAAE,EAAE,SAAS;MAC9B,IAAI,OAAO,EAAE,CAAC,IAAI,KAAK,QAAQ,EAAE;UAC/B,cAAc,CAAC,EAAE,EAAE,EAAE,EAAE,SAAS,CAAC,CAAC;OACnC;WAAM,IAAI,OAAO,EAAE,CAAC,IAAI,KAAK,QAAQ,EAAE;UACtC,cAAc,CAAC,EAAE,EAAE,SAAS,CAAC,CAAC;OAC/B;EACH,CAAC,CAAC;EAEF,IAAM,cAAc,GAAG,UAAC,KAAK,EAAE,SAAS;MACtC,IAAM,QAAQ,GAAG;UACf,KAAK,OAAA;UACL,IAAI,EAAE,KAAK,CAAC,IAAI;UAChB,MAAM,EAAE,IAAI;UACZ,OAAO,EAAE,IAAI;OACd,CAAC;;MAEF,IAAM,SAAS,GAAG,QAAQ,CAAC,IAAI,CAAC;MAChC,QAAQ,CAAC,MAAM,GAAG,SAAS,CAAC,KAAK,EAAE,CAAC;MAEpC,MAAM,CAAC;UACL,QAAQ,CAAC,OAAO,GAAG,QAAQ,CAAC,MAAM,IAAI,QAAQ,CAAC,MAAM,EAAE,CAAC;UACxD,IAAI,SAAS,KAAK,aAAa,EAAE;cAC/B,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,OAAO,CAAC,MAAM,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;WACpE;UACD,KAAK,CAAC,IAAI,EAAE,QAAQ,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;OAC1C,CAAC,CAAC;EACL,CAAC,CAAC;EAEF,IAAM,cAAc,GAAG,UAAC,EAAE,EAAE,EAAE,EAAE,SAAS;MACvC,IAAI,EAAE,KAAK,IAAI,EAAE;UACf,YAAY,CAAC,EAAE,EAAE,SAAS,CAAC,CAAC;OAC7B;WAAM;UACL,YAAY,CAAC,EAAE,EAAE,EAAa,CAAC,CAAC;OACjC;EACH,CAAC,CAAC;EACF,IAAM,YAAY,GAAG,UAAC,KAAK,EAAE,SAAS;MAC5B,IAAA,IAAI,GAAsB,KAAK,KAA3B,EAAE,KAAK,GAAe,KAAK,MAApB,EAAE,QAAQ,GAAK,KAAK,SAAV,CAAW;MACxC,IAAI,EAAE,IAAI,KAAK,CAAC,EAAE,GAAG,OAAO,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,CAAC;MAClD,IAAI,KAAK,EAAE;UACT,KAAK,IAAM,GAAG,IAAI,KAAK,EAAE;cACvB,cAAc,CAAC,EAAE,EAAE,GAAG,EAAE,IAAI,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;WAC3C;OACF;MACD,IAAI,OAAO,QAAQ,KAAK,QAAQ,EAAE;UAChC,OAAO,CAAC,cAAc,CAAC,EAAE,EAAE,QAAQ,CAAC,CAAC;OACtC;WAAM,IAAI,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE;UAClC,aAAa,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;OAC7B;MACD,OAAO,CAAC,MAAM,CAAC,EAAE,EAAE,SAAS,EAAE,IAAI,CAAC,CAAC;EACtC,CAAC,CAAC;EAEF,IAAM,YAAY,GAAG,UAAC,EAAE,EAAE,EAAE,EAAE,SAAS;MACrC,IAAM,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;MAC3B,IAAM,QAAQ,GAAG,EAAE,CAAC,KAAK,CAAC;MAC1B,IAAM,QAAQ,GAAG,EAAE,CAAC,KAAK,CAAC;MAE1B,UAAU,CAAC,EAAE,EAAE,EAAE,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAAC;MACvC,aAAa,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;EAC5B,CAAC,CAAC;EAEF,IAAM,UAAU,GAAG,UAAC,EAAE,EAAE,EAAE,EAAE,QAAQ,EAAE,QAAQ;MAC5C,IAAI,QAAQ,KAAK,QAAQ,EAAE;;UAGzB,KAAK,IAAM,GAAG,IAAI,QAAQ,EAAE;cAC1B,IAAM,IAAI,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC;cAC3B,IAAM,IAAI,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC;cAC3B,IAAI,IAAI,KAAK,IAAI,EAAE;kBACjB,cAAc,CAAC,EAAE,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;eACrC;WACF;;UAGD,KAAK,IAAM,GAAG,IAAI,QAAQ,EAAE;cAC1B,IAAI,EAAE,GAAG,IAAI,QAAQ,CAAC,EAAE;kBACtB,cAAc,CAAC,EAAE,EAAE,GAAG,EAAE,QAAQ,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,CAAC;eAC9C;WACF;OACF;EACH,CAAC,CAAC;EACF,IAAM,aAAa,GAAG,UAAC,EAAE,EAAE,EAAE,EAAE,SAAS;MACtC,IAAM,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC,QAAQ,CAAC;MAC7B,IAAM,EAAE,IAAI,EAAE,GAAG,EAAE,CAAC,QAAQ,CAAC,CAAC;MAC9B,IAAI,OAAO,EAAE,KAAK,QAAQ,EAAE;;UAE1B,IAAI,KAAK,CAAC,OAAO,CAAC,EAAE,CAAC,EAAE;cACrB,eAAe,CAAC,EAAE,CAAC,CAAC;WACrB;;UAED,IAAI,EAAE,KAAK,EAAE,EAAE;cACb,OAAO,CAAC,cAAc,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;cACtC,aAAa,CAAC,EAAE,EAAE,SAAS,CAAC,CAAC;WAC9B;OACF;WAAM;UACL,IAAI,OAAO,EAAE,KAAK,QAAQ,EAAE;cAC1B,OAAO,CAAC,cAAc,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;cACtC,aAAa,CAAC,EAAE,EAAE,SAAS,CAAC,CAAC;WAC9B;;;UAID,kBAAkB,CAAC,EAAE,EAAE,EAAE,EAAE,SAAS,CAAC,CAAC;OACvC;EACH,CAAC,CAAC;EAEF,IAAM,IAAI,GAAG,UAAC,KAAK,EAAE,SAAS,EAAE,MAAM;MACpC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,EAAE,SAAS,EAAE,MAAM,CAAC,CAAC;EAC9C,CAAC,CAAC;EACF,IAAM,aAAa,GAAG,UAAC,QAAQ,EAAE,SAAS;MACxC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;UACxC,IAAM,KAAK,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;UAC1B,KAAK,CAAC,IAAI,EAAE,KAAK,EAAE,SAAS,CAAC,CAAC;OAC/B;EACH,CAAC,CAAC;EAEF,IAAM,eAAe,GAAG,UAAA,QAAQ;MAC9B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;UACxC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;OACtB;EACH,CAAC,CAAC;EAEF,IAAM,OAAO,GAAG,UAAA,KAAK;MACnB,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;EAC3B,CAAC,CAAC;EAEF,IAAM,IAAI,GAAG,WAAW,CAAC;EACzB,IAAM,IAAI,GAAG,UAAA,GAAG,IAAI,OAAA,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,GAAA,CAAC;EACnC,IAAM,cAAc,GAAG,UAAC,EAAE,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI;;MAEzC,IAAI,IAAI,CAAC,GAAG,CAAC,EAAE;UACb,IAAM,MAAI,GAAG,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC;UACxC,IAAI,IAAI,EAAE,CAAC,mBAAmB,CAAC,MAAI,EAAE,IAAI,CAAC,CAAC;UAC3C,IAAI,IAAI,EAAE,CAAC,gBAAgB,CAAC,MAAI,EAAE,IAAI,CAAC,CAAC;OACzC;WAAM;;UAEL,IAAI,IAAI,KAAK,IAAI,EAAE;cACjB,EAAE,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;WACzB;eAAM;cACL,EAAE,CAAC,YAAY,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;WAC5B;OACF;EACH,CAAC,CAAC;EAEF,IAAM,kBAAkB,GAAG,UAAC,EAAE,EAAE,EAAE,EAAE,SAAS;MAC3C,IAAI,CAAC,CAAC;MACN,IAAI,EAAE,GAAG,EAAE,CAAC,MAAM,GAAG,CAAC,CAAC;MACvB,IAAI,EAAE,GAAG,EAAE,CAAC,MAAM,GAAG,CAAC,CAAC;MACvB,IAAM,gBAAgB,GAAG,IAAI,GAAG,EAAE,CAAC;MACnC,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,EAAE,EAAE;UACxB,IAAM,SAAS,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;UACxB,gBAAgB,CAAC,GAAG,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;OAC9C;MAED,IAAM,qBAAqB,GAAG,IAAI,KAAK,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC;MAChD,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,EAAE;UAAE,qBAAqB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;MACxD,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,EAAE,EAAE;UACxB,IAAM,SAAS,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;UACxB,IAAI,QAAQ,GAAG,gBAAgB,CAAC,GAAG,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;UACzD,IAAI,QAAQ,KAAK,SAAS,EAAE;;cAE1B,OAAO,CAAC,SAAS,CAAC,CAAC;WACpB;eAAM;cACL,qBAAqB,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;;cAEpC,KAAK,CAAC,SAAS,EAAE,EAAE,CAAC,QAAQ,CAAC,EAAE,SAAS,CAAC,CAAC;WAC3C;OACF;MAED,IAAM,QAAQ,GAAG,WAAW,CAAC,qBAAqB,CAAC,CAAC;MACpD,IAAI,CAAC,GAAG,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC;MAC5B,KAAK,CAAC,GAAG,EAAE,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE;UACxB,IAAM,QAAQ,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;UAEvB,IAAM,MAAM,GAAG,CAAC,GAAG,CAAC,IAAI,EAAE,GAAG,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,IAAI,CAAC;UACjD,IAAI,qBAAqB,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE;;cAEnC,KAAK,CAAC,IAAI,EAAE,QAAQ,EAAE,SAAS,CAAC,CAAC;WAClC;eAAM;cACL,IAAI,CAAC,IAAI,QAAQ,CAAC,CAAC,CAAC,EAAE;kBACpB,CAAC,EAAE,CAAC;eACL;mBAAM;kBACL,IAAI,CAAC,QAAQ,EAAE,SAAS,EAAE,MAAM,CAAC,CAAC;eACnC;WACF;OACF;EACH,CAAC,CAAC;EAEF;EAEA,IAAM,WAAW,GAAG,UAAA,GAAG;MACrB,IAAM,CAAC,GAAG,GAAG,CAAC,KAAK,EAAE,CAAC;;MAEtB,IAAM,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;MAEnB,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;MAClB,IAAM,GAAG,GAAG,GAAG,CAAC,MAAM,CAAC;MACvB,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;UACxB,IAAM,IAAI,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;;UAEpB,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;UAC9B,IAAI,GAAG,CAAC,CAAC,CAAC,GAAG,IAAI,EAAE;cACjB,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;cACT,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;cACf,SAAS;WACV;;UAED,CAAC,GAAG,CAAC,CAAC;UACN,CAAC,GAAG,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC;UACtB,OAAO,CAAC,GAAG,CAAC,EAAE;cACZ,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;cACtB,IAAI,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,EAAE;kBACzB,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;eACX;mBAAM;kBACL,CAAC,GAAG,CAAC,CAAC;eACP;WACF;UACD,IAAI,CAAC,GAAG,CAAC,EAAE;cACT,CAAC,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;WACtB;UACD,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;OACf;MAED,CAAC,GAAG,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC;MACtB,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;MACd,OAAO,CAAC,IAAI,CAAC,EAAE;UACb,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;UACd,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;UACT,CAAC,EAAE,CAAC;OACL;MAED,OAAO,MAAM,CAAC;EAChB,CAAC;;;;;;;;;;;;"}